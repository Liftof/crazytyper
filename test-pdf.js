// Test script pour vÃ©rifier l'export PDF
console.log('ğŸ§ª DÃ©but des tests PDF...');

// Test 1: VÃ©rifier que jsPDF se charge
setTimeout(() => {
    console.log('ğŸ“¦ Test 1: VÃ©rification jsPDF');
    if (typeof window.jspdf !== 'undefined') {
        console.log('âœ… jsPDF chargÃ© avec succÃ¨s');
        console.log('ğŸ“‹ Version jsPDF:', window.jspdf.version || 'inconnue');
    } else {
        console.error('âŒ jsPDF non trouvÃ©');
        return;
    }

    // Test 2: Simuler la gÃ©nÃ©ration de texte
    console.log('ğŸ“ Test 2: Simulation gÃ©nÃ©ration de texte');
    const outputElement = document.querySelector('.typewriter-output');
    if (outputElement) {
        outputElement.innerHTML = `
            <span class="char-faded">T</span>his is a test document generated by CrazyTyper.

            It contains multiple paragraphs with typewriter effects like <span class="char-heavy">bold characters</span>, 
            <span class="char-faded">faded text</span>, and <span class="char-uneven">uneven spacing</span>.

            This should demonstrate how the PDF export handles different text formatting and 
            typewriter imperfections in the final output.

            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
            incididunt ut labore et dolore magna aliqua.
        `;
        outputElement.style.display = 'block';
        document.getElementById('outputSection').classList.remove('hidden');
        console.log('âœ… Texte test ajoutÃ© Ã  l\'output');
    } else {
        console.error('âŒ Element output non trouvÃ©');
    }

    // Test 3: VÃ©rifier les polices disponibles
    console.log('ğŸ”¤ Test 3: Polices disponibles');
    const fontSelect = document.getElementById('fontSelect');
    if (fontSelect) {
        console.log('âœ… Font select trouvÃ© avec', fontSelect.options.length, 'options');
        
        // Test avec une police typewriter
        fontSelect.value = 'jmh-typewriter';
        console.log('ğŸ¯ Police sÃ©lectionnÃ©e:', fontSelect.value);
    }

    // Test 4: Test export PDF
    console.log('ğŸ”„ Test 4: Test export PDF...');
    setTimeout(() => {
        try {
            exportToPDF();
            console.log('âœ… Export PDF dÃ©clenchÃ© sans erreur');
        } catch (error) {
            console.error('âŒ Erreur export PDF:', error);
        }
    }, 1000);

}, 2000); // Attendre que tout se charge

// Test des polices aprÃ¨s chargement
setTimeout(() => {
    console.log('ğŸ” Test bonus: VÃ©rification polices custom');
    const computedStyle = window.getComputedStyle(document.querySelector('.typewriter-output'));
    console.log('ğŸ“‹ Police calculÃ©e:', computedStyle.fontFamily);
}, 3000);

console.log('â³ Tests en cours... VÃ©rifiez la console dans 5 secondes');